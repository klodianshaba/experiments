<div *appHasPermission="1">
  <strong>Short hand foreach structural directive</strong> <br /><br />
  <div class="items">
    <div
      appCard
      *appForeach="
        let item of todoStore.entities();
        empty: emptyTemplate;
        let index = index;
        let first = first;
        let last = last
      ">
      <div>
        <span *appIf="!first && !last"> {{ index }}</span>
        <span *appIf="first"> first</span>
        <span *appIf="last"> last </span>
      </div>
    </div>
  </div>
  <br />
  <strong>Long form foreach structural directive</strong> <br /><br />
  <div class="items">
    <ng-template
      appForeach
      let-item
      let-index="index"
      let-first="first"
      let-last="last"
      [appForeachOf]="todoStore.entities()"
      [appForeachEmpty]="emptyTemplate">
      <div appCard>
        <span *appIf="!first && !last"> {{ item.name }}</span>
        <span *appIf="first"> {{ item.name }}</span>
        <span *appIf="last"> {{ item.name }} </span>
      </div>
    </ng-template>
  </div>
</div>
<ng-template #emptyTemplate>empty</ng-template>
<br />

<button (click)="set()">Set</button>
<button (click)="setMany()">Set many</button>
<button (click)="setAll()">Set all</button>
<br /><br />

<button (click)="add()">Add</button>
<button (click)="addMany()">Add many</button>
<br /><br />

<button (click)="update()">Update</button>
<button (click)="updateMany()">Update many</button>
<button (click)="updateAll()">Update all</button>
<button (click)="updatePredicate()">Update predicate</button>
<br /><br />

<button (click)="remove()">Remove</button>
<button (click)="removeMany()">Remove many</button>
<button (click)="removeAll()">Remove all</button>
<button (click)="removePredicate()">Remove predicate</button>
<br /><br />

@defer (on viewport) {
  <div style="padding: 1rem">
    <app-insights [(user)]="user" />
  </div>
} @placeholder (minimum 500ms) {
  <p>Placeholder insights</p>
} @loading (minimum 1s) {
  <p>Loading insights</p>
} @error {
  <p>Fail to load insights</p>
}
